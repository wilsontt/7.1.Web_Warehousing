# API 契約文件模板

**版本**: 1.0  
**建立日期**: 2025/11/15  
**用途**: 所有模組 API 契約文件的標準模板

---

## 如何使用本模板

1. 複製本模板到 `docs/api/[模組名稱]_API_CONTRACT.md`
2. 替換所有 `[模組名稱]`、`[API 路徑]` 等佔位符
3. 根據實際需求調整內容
4. 保持結構一致性

---

## [模組名稱] API 契約文件

**版本**: 1.0  
**建立日期**: [日期]  
**依據規格**: `[模組路徑]/規格文件 (SPEC)-[模組名稱].md` (v[版本])  
**依據憲章**: v2.1.0

---

## 概述

本文件定義了「[模組名稱]」模組的 API 契約，用於前端與後端開發的介面規範。

### API 基礎資訊

- **Base URL**: `/api/[模組路徑]`
- **認證方式**: Bearer Token (JWT)
- **內容類型**: `application/json`
- **字元編碼**: UTF-8

### 權限要求

所有 API 端點都需要：
- 有效的 JWT Token
- 「[權限名稱]」權限（RBAC）

---

## API 端點

### [API 編號]. [HTTP 方法] /api/[路徑]

[API 功能描述]

#### 請求

**Headers**:
```
Authorization: Bearer {token}
Content-Type: application/json
```

**Query Parameters / Request Body**:
[參數說明]

#### 回應

**成功回應 ([HTTP 狀態碼])**:
```json
{
  // 回應範例
}
```

**錯誤回應**: [參考下方錯誤碼定義]

---

## 錯誤碼定義

| 錯誤碼 | HTTP 狀態碼 | 說明 |
|--------|------------|------|
| `UNAUTHORIZED` | 401 | 未提供或無效的 Token |
| `FORBIDDEN` | 403 | 沒有權限 |
| `VALIDATION_ERROR` | 400 | 資料驗證失敗 |
| `BUSINESS_RULE_VIOLATION` | 400 | 違反業務規則 |
| `OPTIMISTIC_LOCK_CONFLICT` | 409 | 樂觀鎖定衝突 |
| `DUPLICATE_KEY` | 400 | 唯一鍵重複 |
| `NOT_FOUND` | 404 | 資料不存在 |
| `INTERNAL_SERVER_ERROR` | 500 | 伺服器內部錯誤 |

---

## 資料驗證規則

[根據模組需求填寫]

---

## 業務規則

[根據模組需求填寫]

---

## 型別定義

所有型別定義請參考：`lib/types/[模組名稱].ts`

---

## 變更記錄

| 版本 | 日期 | 變更內容 | 變更人 |
|------|------|---------|--------|
| 1.0 | [日期] | 初始版本 | [姓名] |

---

**文件版本**: 1.0  
**最後更新**: [日期]

